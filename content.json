{"pages":[{"title":"关于","text":"关于网站1234567基于icarus主题修改，2020.03.31 - 调整阅读模式双栏 https://www.alphalxy.com/2019/03/customize-icarus/#%E4%BC%98%E5%8C%96%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E5%B8%83%E5%B1%80 - 优化首页文章卡点击跳转 - 新增脚注的推荐链接 - 导航栏置顶悬浮 - 微调各元素位置 -","link":"/about/index.html"}],"posts":[{"title":"npm改源","text":"大家都知道国内直接使用 npm 的官方镜像是非常慢的，这里推荐使用淘宝 NPM 镜像。 淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本 (只读)，同步频率目前为 10 分钟 一次以保证尽量与官方服务同步。 你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm: saa.bat 1$ npm install -g cnpm --registry=https://registry.npm.taobao.org 这样就可以使用 cnpm 命令来安装模块了： 1$ cnpm install [name]","link":"/2020/03/npm%E6%94%B9%E6%BA%90/"},{"title":"云课堂刷课油猴脚本（待完善）","text":"云课堂刷课 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135// ==UserScript==// @name 云学堂(刷课)--Ada// @namespace http://tampermonkey.net/// @version 0.1// @description try to take over the world!// @author You// @match http*://*.yunxuetang.cn/*/video/*// @match http*://*.yunxuetang.cn/plan/*.html// @match http*://*.yunxuetang.cn/kng/plan/document/*// @match http*://*.yunxuetang.cn/kng/plan/video/*// @match http*://*.yunxuetang.cn/kng/plan/package/*// @match http*://*.yunxuetang.cn/kng/course/package/video/*// @match http*://*.yunxuetang.cn/kng/view/video/*// @match http*://*.yunxuetang.cn/mit/*// @grant none// ==/UserScript==(function() { // 获取当前uri var path = window.location.pathname; // 获取任务列表页 if(path.match(/^\\/mit\\/myhomeworkexprience.*/g)) { // 记录当前网址 localStorage.setItem('VideoListPage', window.location.href); // 点击跳转 播放 document.getElementsByClassName('text-link hand')[0].click(); window.close(); } // 视频页 else if(path.match(/^\\/kng\\/view\\/video.*/g)){ bobo(); } // 调查页面 else if(path.match(/^\\/mit\\/tasksurveyview.htm.*/g)){ console.log(\"当前为调查页面\"); // 跳转到填写页面 toDo(); // 关闭当前页面 window.close(); //document.getElementsByTagName('textarea')[0].textContent='无aa' } // 视屏页播放 function bobo(){ // 获取弹窗位置 var x = document.getElementsByClassName('btnok'); setInterval(function(){ // 去除水印 detectionWatermark(); // 点击继续学习 if(x[1] != null &amp;&amp; x[1].value == \"继续学习\"){RemoveWarningHtml();} //检测多开弹窗 checkMoreOpen(); //检测完成(进度100%) detectionComplete(); //检测播放状态 detectPlaybackStatus(); }, 3000); } // 去除水印 function detectionWatermark(){ // 获取水印位置 var a=document.getElementsByClassName('video-watermark-item noselect'); // 若水印存在，去除水印 if(a[0].style.display!=\"none\"){ a[0].style.display=\"none\"; a[1].style.display=\"none\"; a[2].style.display=\"none\"; } } //检测多开弹窗 function checkMoreOpen() { console.log('监测多开弹窗中...'); if ($(\"#dvSingleTrack\").length) { console.error(\"防止多开作弊 弹窗\"); StartCurStudy(); } } //在线检测否有弹窗 function detectionOnline() { var date = new Date(); var dom = document.getElementById(\"dvWarningView\"); console.info(date.toLocaleString() + ' 检测是否有弹窗...'); if (dom) { console.debug('弹窗出来了'); var cont = dom.getElementsByClassName(\"playgooncontent\")[0].innerText; if (cont.indexOf(\"请不要走开喔\") != -1) { document.getElementsByClassName(\"btnok\")[1].click(); } else { //没遇到过这种情况 不能处理了 返回上一级 console.error('没遇到过这种情况 不能处理了, 弹窗内容：' + cont); //刷新当前页吧 window.location.reload(); } } } //检测完成(进度100%) function detectionComplete() { var percentage = $('#ScheduleText').text(); console.log('进度百分比: ' + percentage); if (percentage == ' 100%') { // 关闭播放页 window.close();console.log('正在关闭播放页'); // 打开列表页 window.open (localStorage.getItem('VideoListPage'));console.log('正在打开列表页'); //window.location.href=localStorage.getItem('VideoListPage'); } } //检测播放状态 function detectPlaybackStatus() { var date = new Date(); console.info(date.toLocaleString() + ' 检测播放状态...') if (myPlayer.getState() == 'playing') { console.log(\"播放中...啥也不操作了\"); } else if (myPlayer.getState() == 'paused') { //暂停 console.log(\"暂停啦！！！\"); myPlayer.play(); console.log(\"开始播放~\"); } else if (myPlayer.getState() == 'complete') { console.log($('#lblTitle').text() + \"播放完成！！！\"); //返回上一级 window.close(); window.open (localStorage.getItem('VideoListPage')); //window.location.href=localStorage.getItem('VideoListPage'); } }})();","link":"/2020/04/%E4%BA%91%E8%AF%BE%E5%A0%82%E5%88%B7%E8%AF%BE%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC(%E5%BE%85%E5%AE%8C%E5%96%84)/"},{"title":"网络安全书单","text":"网络安全书单","link":"/2020/04/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B9%A6%E5%8D%95/"},{"title":"百度网盘永存文件原理(百度网盘批量处理助手bdmaster)","text":"揭秘永存文件黑科技技术，批量永存是将电脑中的文件通过《百度网盘批量处理助手》软件转换成永存格式的文件（.bdmaster.），无论多大的文件都可以转换成只有几 b 的永存格式文件，然后通过百度网盘批量处理大师极快恢复到网盘中。同时也可以在线加载永存格式的文件恢复到网盘中。初次理解起来可能有点绕，简单的说就是，用一个很小的文件就可以代替大文件存放到网盘中，需要使用时直接在线加载恢复即可。 1 百度网盘批量大师操作流程首先这款软件是收费的（30rmb/季度），土壕请自便（软件下载的时候提示危险文件）。免费功能不能批量生成。选择要生成永存的文件，右键选择即可： 在本地就会有一个永存文件，使用记事本打开里面有四个密文字段（这里是重点，要考的）： 恢复文件 只要在百度网盘批量处理助手中点击恢复，这里就不操作了。 2 永存文件原理揭秘python写的软件，本来想反编译直接看看源代码，但是.pyd的文件没有找到反编译的工具。只能基于软件运行过程的流量包去分析其原理了。 2.1 原理百度网盘就是一个大的文件服务器上面存储了所有文件，当你上传文件或者转存文件，百度网盘都会先看看服务器中有没有这个文件，判断的依据就是文件的md5值。当然只对公共文件有效果，对个人文件不适用，个人文件还是建议存在硬盘里吧。只要有这个md5值，并且这个文件在别人的网盘中存在，你上传文件或者转存相当于在你网盘中放一个快捷方式。 先看看秒传文件文件的请求包： 1234567891011121314POST /api/rapidupload?method=rapidupload&amp;app_id=250528&amp;t=1586171852&amp;bdstoken=05235089db6d2bf89d7d0e27f79e7a8f HTTP/1.1Host: pan.baidu.comConnection: closeReferer: http://pan.baidu.com/disk/homeUser-Agent: netdisk;4.6.2.0;PC;PC-Windows;10.0.10240;WindowsBaiduYunGuanJiaCookie: Content-Length: 152Content-Type: application/x-www-form-urlencodedpath=%2Foem8.exe&amp;content-length=1216000&amp;content-md5=6bacd62274e26f6d7cd4c6aa1a5eed7d&amp;slice-md5=2d3857e0417fb209c94af3dd3e457a00&amp;content-crc32=2311374790 POST请求包中有5个字段，除了path转存路径字段。剩下的4个字段的其实就是《百度网盘批量处理助手》生成的永存文件中的内容： 文件名：oem8.bdmaster.exe1234dtjqGkYrQUY0mWrnpOKoWO8KLlnBiY6gBaxJwS3URynnlLbZ+mjEExbqtCs3MVb7LxW1s1L68Vr/TJsTAgU+WwEtJ9NeMIDErptzU0HF1e0n067vG51TQv/+RvOVp1LXVKA9k6PV0BLpb6j57wsu0Z3enPGOJ0CItsdol20aaeIGVHu1XEHdNW74fNhErAvmRO8HBXDqaWFrBnmZDFCx41x4sAEcKsQjnuzJQZtsHRe2yemZMYDVP7mCJAb0kDig 永存文件到这里就不攻自破了，利用的就是秒传文件的操作, 其原理就是记录文件的MD5值，切片MD5值、文件大小、crc32文件校验码。 2.2 揭秘content-length、content-md5、content-crc32这三个字段可以在文件下载的返回包中获取到： 最后只要知道切片文件的MD5值就大功告成了，slice-md5： 百度云文件切片MD5文件是指文件的前256kb切片的MD5，所以只要在下载请求包中定义字段Range: bytes=0-262143即可： 将请求包内容保存到本地计算一下MD5，就付出真相水面了： 2.3 小结只要有content-length、content-md5、content-crc32、slice-md5这四个字段就可以代表当前文件, 本地就不用存储原始文件，就可以实现秒传，达到恢复文件。 3 后期知道原理就可以写一个批量生成永存文件的工具了， 2020/04/06 还没有开工 2020/04/07 完成了本地文件转永存快捷文件、在线文件转永存快捷方式 2020/04/08 10日 公司有个考核先暂停这个项目 有问题请联系lvwenda1215@qq.com 获取切片数据包 12345GET /file/07c2cddd6fada2c610fc8e81a7eb7166?bkt=...... HTTP/1.1Host: qdall01.baidupcs.comRange: bytes=0-262143User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36Cookie: 秒传文件数据包 12345678910POST /api/rapidupload?method=rapidupload&amp;app_id=250528&amp;t=1586171852&amp;bdstoken=05235089db6d2bf89d7d0e27f79e7a8f HTTP/1.1Host: pan.baidu.comConnection: closeReferer: http://pan.baidu.com/disk/homeUser-Agent: netdisk;4.6.2.0;PC;PC-Windows;10.0.10240;WindowsBaiduYunGuanJiaCookie: Content-Length: 166Content-Type: application/x-www-form-urlencodedpath=%2Ftest%2Foem8.txt&amp;content-length=5231140864&amp;content-md5=07c2cddd6fada2c610fc8e81a7eb7166&amp;slice-md5=d334b43b8675b6b3787d5255adec648c&amp;content-crc32=1963107583","link":"/2020/04/2020-04-06-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E6%B0%B8%E5%AD%98%E6%96%87%E4%BB%B6%E5%8E%9F%E7%90%86-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86%E5%8A%A9%E6%89%8Bbdmaster/"}],"tags":[{"name":"脚本","slug":"脚本","link":"/tags/%E8%84%9A%E6%9C%AC/"},{"name":"油猴","slug":"油猴","link":"/tags/%E6%B2%B9%E7%8C%B4/"},{"name":"网络安全","slug":"网络安全","link":"/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"},{"name":"破解","slug":"破解","link":"/tags/%E7%A0%B4%E8%A7%A3/"},{"name":"百度网盘","slug":"百度网盘","link":"/tags/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/"}],"categories":[{"name":"资源","slug":"资源","link":"/categories/%E8%B5%84%E6%BA%90/"}]}